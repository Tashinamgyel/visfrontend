<mat-card>
  <div fxLayout="column" class="components-container-gt-xs" [ngClass.xs]="'components-container-xs'" fxLayoutGap="20px">
    <div fxFlex class="button-component-holder mat-elevation-z4">
      <mat-toolbar class="button-header">
        <h5 class="p-2" style="padding-top: 20px; margin-left: 20px">Renewal/De-registration/Update</h5>
      </mat-toolbar>
      <div class="button-container">
        <div class="container">
          <form class="form-horizontal form" [formGroup]="petRenewalForm">
            <div class="container">
              <div class="row">
                <div class="col-md-6">
                  <label class="col-form-label">Search<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      type="text"
                      matInput
                      formControlName="petRegistrationNoOrMicrochip"
                      matInput
                      name="emailId"
                      placeholder="Pet Registration Number/Microchip Number"
                    />
                    <mat-error>Pet Registration Number required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-2" style="margin-top: 39px; margin-left: -40px">
                  <label class="col-form-label"></label>
                  <button (click)="getPetRegistrationNumber()" color="primary" mat-raised-button>
                    <mat-icon>search</mat-icon>
                  </button>
                </div>
              </div>
              <br />
              <br />
              <br />
              <div>
                <div class="row" *ngIf="imageShow">
                  <div class="form-group row" style="margin: 0 auto">
                    <div class="col-md-6">
                      <img
                        style="width: 200px; height: 60%; float: right"
                        src="data:image/jpeg;base64,{{ showingImage }}"
                      />
                    </div>

                    <div class="col-md-6" *ngIf="barcodeshow">
                      <img
                        style="width: 200px; height: 60%; float: right"
                        src="data:image/jpeg;base64,{{ showingBarCode }}"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <div class="col-md-3">
                  <label class="col-form-label"> Update Pet's Photo<span class="text-danger">*</span></label>
                </div>
                <div class="col-md-6">
                  <input
                    (change)="selectFile($event.target.files, 'Photo')"
                    id="file"
                    type="file"
                    formControlName="hasPetPhoto"
                    [(ngModel)]="hasPetPhoto"
                  />
                  <mat-error *ngIf="hasPetPhotoFlag">Pet Photo is required</mat-error>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Pet Registration Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      type="text"
                      matInput
                      formControlName="petRegistrationNo"
                      readonly
                      placeholder="Pet registration Number"
                    />
                  </mat-form-field>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label">Animal Ownership Type<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="petRegistrationTypeId"
                      matInput
                      name="ownerType"
                      placeholder="Animal Ownership Type"
                      readonly
                    />
                    <mat-error>Owner Type is required</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Registration Date</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      matInput
                      [matDatepicker]="picks"
                      formControlName="registrationDate"
                      disabled
                      placeholder="Registration Date"
                    />
                    <mat-datepicker-toggle matSuffix [for]="picks"></mat-datepicker-toggle>
                    <mat-datepicker #picks></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <h4>Owner Details</h4>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Nationality</label>
                  <mat-form-field class="example-full-width" appearance="outline">
                    <input formControlName="nationality" matInput readonly placeholder="Nationality" />
                  </mat-form-field>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label">CID Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="cid" matInput name="cid" placeholder="CID" readonly />
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row">
                <div style="margin-top: 20px" *ngIf="nationality === false" class="col-md-6">
                  <label class="col-form-label">Passport Number/Work Permit number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="passportNumber"
                      matInput
                      name="passportNumber"
                      placeholder="Passport Number"
                      readonly
                    />
                  </mat-form-field>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label">Owner Name</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="ownerName" matInput name="dzongkhag" placeholder="Owner Name" readonly />
                  </mat-form-field>
                </div>
              </div>
              <div *ngIf="nationality === false">
                <div class="form-group row">
                  <div class="col-md-6">
                    <label class="col-form-label">Country</label>
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-select formControlName="countryId">
                        <mat-option value="">Select Country</mat-option>
                        <mat-option *ngFor="let country of countrys" [value]="country.id">{{
                          country.countryName
                        }}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <br />

              <h5>Present Address</h5>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Dzongkhag</label>
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-select formControlName="dzongkhagId" (selectionChange)="getGewogs($event.value)">
                      <mat-option value="">Select Dzongkhag</mat-option>
                      <mat-option *ngFor="let dzongkhag of dzongkhags" [value]="dzongkhag.id">{{
                        dzongkhag.dzongkhagName
                      }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Gewog<span class="text-danger">*</span></label>
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-select formControlName="gewogId" (selectionChange)="getVillage($event.value)" required>
                      <mat-option value="">Select Gewog</mat-option>
                      <mat-option *ngFor="let gewog of gewogs" [value]="gewog.id">{{ gewog.gewogName }}</mat-option>
                    </mat-select>
                    <mat-error>Gewog is required</mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Village</label>
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-select formControlName="villageId">
                      <mat-option value="">Select Village</mat-option>
                      <mat-option *ngFor="let village of villages" [value]="village.id">{{
                        village.villageName
                      }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Locality<span class="text-danger">*</span></label>

                  <mat-form-field appearance="outline" class="example-full-width">
                    <textarea matInput formControlName="locality" name="locality" placeholder="Locality"></textarea>
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Mobile Number<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      matInput
                      formControlName="mobileNumber"
                      name="mobileNumber"
                      placeholder="Mobile Number"
                      maxlength="8"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                    />
                    <!-- <mat-error>Mobile Number is required</mat-error> -->
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Email ID </label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="emailId" name="emailId" placeholder="Email ID" />
                  </mat-form-field>
                </div>
              </div>
              <br />
              <h4>Pet Details</h4>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Pet Name</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="petName" name="mobileNumber" placeholder="Pet Name" readonly />
                  </mat-form-field>
                </div>
                <div class="col-md-6" *ngIf="dontshowIT">
                  <label class="col-form-label">Microchip Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      matInput
                      formControlName="microchipNumber"
                      name="microchipNumber"
                      placeholder="Microchip Number"
                      readonly
                    />
                  </mat-form-field>
                </div>
                <div class="col-md-6" style="margin-top: 10px">
                  <label class="col-form-label">Species</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="speciesName" matInput name="speciesName" readonly placeholder="Species" />
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Breed</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="breed" matInput name="breed" readonly placeholder="Breed" />
                  </mat-form-field>
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Colour</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="colour" placeholder="Colour" />
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Distinguishing Mark</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="distinguishingMark" placeholder="Distinguishing Mark" />
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-form-label">Age</label>
                    <div class="row gutters-xs">
                      <div class="col-3">
                        <mat-form-field appearance="outline" style="width: 100px">
                          <mat-label>Year</mat-label>
                          <input formControlName="year" matInput type="number" id="number" min="0" placeholder="Year" />
                        </mat-form-field>
                      </div>
                      <div class="col-3">
                        <mat-form-field appearance="outline" style="width: 100px">
                          <mat-label>Month</mat-label>
                          <input
                            formControlName="month"
                            matInput
                            type="number"
                            id="number"
                            min="0"
                            placeholder="Month"
                            (change)="validateYear('month')"
                            placeholder="Month(1-11)"
                          />
                        </mat-form-field>
                      </div>
                      <div class="col-3">
                        <mat-form-field appearance="outline" style="width: 100px">
                          <mat-label>Day</mat-label>
                          <input
                            formControlName="day"
                            matInput
                            type="number"
                            id="number"
                            min="0"
                            placeholder="Day"
                            (change)="validateYear('day')"
                            placeholder="Day(1-29)"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label">Sex</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="sex" matInput readonly placeholder="Sex" />
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-md-6" *ngIf="editableShow">
                  <label class="col-form-label">Neuter Status</label>

                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="neuterStatus" (selectionChange)="validateNeatus()">
                      <mat-option value="">Select Neuter Status</mat-option>
                      <mat-option value="Yes">Yes</mat-option>
                      <mat-option value="No">No</mat-option>
                      <mat-option value="Unknown">Unknown</mat-option>
                    </mat-select>
                    <!-- <mat-error>Neutered Status is required</mat-error> -->
                  </mat-form-field>
                </div>

                <div class="col-md-6" *ngIf="notEditableShow">
                  <label class="col-form-label">Neuter Status </label>

                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="neuterStatus" readonly />
                  </mat-form-field>
                </div>

                <div class="col-md-6" *ngIf="neuterStatusFlag">
                  <label class="col-form-label">Breeder Status</label>
                  <mat-radio-group
                    class="mat-radio-group p-3"
                    aria-label="Select an option"
                    formControlName="breederStatus"
                  >
                    <mat-radio-button value="Yes">Yes </mat-radio-button>
                    <mat-radio-button value="No">No </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-8" *ngIf="statusShow">
                  <label class="col-form-label">Status<span class="text-danger">*</span></label>
                  <mat-radio-group
                    class="mat-radio-group p-3"
                    aria-label="Select an option"
                    formControlName="status"
                    (change)="validateAbundata()"
                    readonly
                  >
                    <mat-radio-button value="alive" [checked]="true">Alive </mat-radio-button>
                    <mat-radio-button value="dead">Dead </mat-radio-button>
                    <mat-radio-button value="abandoned"> De-Registration </mat-radio-button>
                    <!-- <mat-radio-button  value="Reregister">Re-register </mat-radio-button> -->
                  </mat-radio-group>
                  <mat-error *ngIf="statusFlag">Status is required</mat-error>
                </div>
                <div class="col-md-8" *ngIf="readOnlyAbondate">
                  <label class="col-form-label">Status<span class="text-danger">*</span></label>
                  <mat-radio-group
                    class="mat-radio-group p-3"
                    aria-label="Select an option"
                    formControlName="status"
                    (change)="validateAbundata()"
                    aria-readonly="readonly"
                  >
                    <mat-radio-button [disabled]="isDisabled" value="alive">Alive </mat-radio-button>
                    <mat-radio-button [disabled]="isDisabled" value="dead">Dead </mat-radio-button>
                    <mat-radio-button value="abandoned"> De-Registration </mat-radio-button>
                    <!-- <mat-radio-button [disabled]="isDisabled" value="Reregister">Re-register </mat-radio-button> -->
                    -->
                  </mat-radio-group>
                  <mat-error *ngIf="statusFlag">Status is required</mat-error>
                </div>
                <div class="col-md-8" *ngIf="readOnlyRegister">
                  <label class="col-form-label">Status<span class="text-danger">*</span></label>
                  <mat-radio-group
                    class="mat-radio-group p-3"
                    aria-label="Select an option"
                    formControlName="status"
                    (change)="validateAbundata()"
                  >
                    <mat-radio-button [disabled]="isDisabled" value="alive">Alive </mat-radio-button>
                    <mat-radio-button [disabled]="isDisabled" value="dead">Dead </mat-radio-button>
                    <mat-radio-button [disabled]="isDisabled" value="abandoned"> De-Registration </mat-radio-button>
                    <mat-radio-button value="Reregister">Re-register </mat-radio-button>
                  </mat-radio-group>
                  <mat-error *ngIf="statusFlag">Status is required</mat-error>
                </div>
              </div>

              <div class="form-group row" *ngIf="petRenewalForm.value.status === 'abandoned'">
                <div class="col-md-6">
                  <label class="col-form-label">De-registration Date</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      type="text"
                      matInput
                      formControlName="abandonedDate"
                      value="{{ formattedDate | date }}"
                      disabled
                    />
                    {{ formattedDate | date }}
                    <mat-datepicker #picks></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row" *ngIf="petRenewalForm.value.status === 'alive'">
                <div class="col-md-6">
                  <label class="col-form-label">Next Renewal Date</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      matInput
                      [matDatepicker]="pic"
                      formControlName="dateRenewal"
                      [readonly]="!editable"
                      [min]="minDate"
                      placeholder="Date of Next Renewal"
                    />
                    <mat-datepicker-toggle matSuffix [for]="pic"></mat-datepicker-toggle>
                    <mat-datepicker #pic></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label"> Revenue Receipt Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input matInput formControlName="receiptNumber" placeholder=" Revenue Receipt Number" />
                    <mat-error Revenue Receipt Number></mat-error>
                  </mat-form-field>
                </div>
              </div>

              <br />
              <hr />
              <br />
              <hr />

              <!-- <div  *ngIf="petRenewalForm.value.status === 'Reregister'">  -->

              <div>
                <form class="form-horizontal form" [formGroup]="petRenewalsForm">
                  <mat-toolbar class="titleTopic">
                    <h5 class="p-2;" style="padding-top: 5px; padding-left: 5px">Re-register Owner Details</h5>
                  </mat-toolbar>
                  &nbsp;

                  <!-- <div class="col-md-6">
                <label class="col-form-label">Nationality</label>
                <mat-form-field class="example-full-width" appearance="outline">
                  <input formControlName="nationality" matInput readonly placeholder="Nationality" />
                </mat-form-field>
              </div> -->
                  <div class="form-group row">
                    <div class="col-md-6">
                      <label class="col-form-label">Re-Registion Date</label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input
                          type="text"
                          matInput
                          formControlName="registerDate"
                          value="{{ reRegistrationDate | date }}"
                          disabled
                        />
                        {{ formattedDate | date }}
                        <mat-datepicker #picks></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                  <br />
                  <div class="form-group row">
                    <div class="col-md-6">
                      <label class="col-form-label">CID Number<span class="text-danger">*</span></label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input
                          formControlName="cid"
                          matInput
                          name="cid"
                          required
                          placeholder="CID"
                          (change)="getCitizen($event.target.value)"
                          maxlength="11"
                          onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                        />
                        <mat-error>CID is required</mat-error>
                      </mat-form-field>
                    </div>

                    <div *ngIf="nationality === false" class="col-md-6">
                      <label class="col-form-label">Passport Number/Work Permit number</label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input
                          formControlName="passportNumber"
                          matInput
                          name="passportNumber"
                          placeholder="Passport Number"
                          required
                        />
                        <mat-error>Passport Number/Work Permit number is required</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                      <label class="col-form-label">Owner Name</label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input
                          formControlName="ownerName"
                          matInput
                          name="ownerName"
                          placeholder="Owner Name"
                          required
                        />
                        <mat-error>Owner Name required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <br />
                  <div *ngIf="nationality === false">
                    <div class="form-group row">
                      <div class="col-md-6">
                        <label class="col-form-label">Country<span class="text-danger">*</span></label>
                        <mat-form-field appearance="outline" class="example-full-width">
                          <mat-select formControlName="countryId" required>
                            <mat-option value="">Select Country</mat-option>
                            <mat-option *ngFor="let country of countrys" [value]="country.id">{{
                              country.countryName
                            }}</mat-option>
                          </mat-select>
                          <mat-error>Country is required</mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                  <br />

                  <h5>Present Address</h5>
                  <div class="form-group row">
                    <div class="col-md-6">
                      <label class="col-form-label">Dzongkhag<span class="text-danger">*</span></label>
                      <mat-form-field class="example-full-width" appearance="outline">
                        <mat-select formControlName="dzongkhagId" (selectionChange)="getGewogs($event.value)" required>
                          <mat-option value="">Select Dzongkhag</mat-option>
                          <mat-option *ngFor="let dzongkhag of dzongkhags" [value]="dzongkhag.id">{{
                            dzongkhag.dzongkhagName
                          }}</mat-option>
                        </mat-select>
                        <mat-error>Dzongkhag is required</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                      <label class="col-form-label">Gewog<span class="text-danger">*</span></label>
                      <mat-form-field class="example-full-width" appearance="outline">
                        <mat-select formControlName="gewogId" (selectionChange)="getVillage($event.value)" required>
                          <mat-option value="">Select Gewog</mat-option>
                          <mat-option *ngFor="let gewog of gewogs" [value]="gewog.id">{{ gewog.gewogName }}</mat-option>
                        </mat-select>
                        <mat-error>Gewog is required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <br />

                  <div class="form-group row">
                    <div class="col-md-6">
                      <label class="col-form-label">Village</label>
                      <mat-form-field class="example-full-width" appearance="outline">
                        <mat-select formControlName="villageId">
                          <mat-option value="">Select Village</mat-option>
                          <mat-option *ngFor="let village of villages" [value]="village.id">{{
                            village.villageName
                          }}</mat-option>
                        </mat-select>
                        <!-- <mat-error>village is required</mat-error> -->
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                      <label class="col-form-label">Locality</label>

                      <mat-form-field appearance="outline" class="example-full-width">
                        <textarea matInput formControlName="locality" name="" placeholder="Locality"></textarea>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-6">
                      <label class="col-form-label">Mobile Number<span class="text-danger">*</span></label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input
                          matInput
                          formControlName="mobileNumber"
                          name="mobileNumber"
                          maxlength="8"
                          placeholder="Mobile Number"
                          required
                          onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                        />
                        <mat-error>Mobile Number is required</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                      <label class="col-form-label">Email ID </label>
                      <mat-form-field appearance="outline" class="example-full-width">
                        <input matInput formControlName="emailId" name="emailId" placeholder="Email ID" />
                        <mat-error>Email ID is required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </form>
              </div>
              <mat-card-actions *ngIf="status">
                <button mat-raised-button color="primary" (click)="updatePetRegistration()">Update</button>
              </mat-card-actions>
              <hr />
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</mat-card>
