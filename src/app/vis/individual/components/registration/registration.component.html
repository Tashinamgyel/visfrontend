<mat-card>
  <div fxLayout="column" class="components-container-gt-xs" [ngClass.xs]="'components-container-xs'" fxLayoutGap="10px">
    <div fxFlex class="button-component-holder mat-elevation-z4">
      <mat-toolbar class="button-header">
        <h5 class="p-2" style="padding-top: 10px; margin-left: 16px">Patient Registration</h5>
      </mat-toolbar>
      <mat-card-content *ngIf="!registered">
        <div class="my-2 my-md-2">
          <form [formGroup]="registrationForm">
            <div class="card-body">
              <h4>Owner Details</h4>
              <hr />
              <div class="form-group row">
                <mat-radio-group
                  (change)="changeNationality($event)"
                  aria-label="Select an option"
                  class="mat-radio-group p-3"
                  formControlName="nationality"
                >
                  <mat-radio-button [value]="1">Bhutanese</mat-radio-button>
                  <mat-radio-button [value]="2">Bhutanese without CID/ Non-Bhutanese</mat-radio-button>
                </mat-radio-group>
              </div>
              <div class="form-group row">
                <div *ngIf="nationality === true" class="col-md-6">
                  <label class="col-form-label">CID Number<span class="text-danger">*</span> </label>
                  <mat-form-field appearance="outline" class="example-full-width" [hideRequiredMarker]="false">
                    <input
                      matInput
                      formControlName="cidNumber"
                      (change)="getCitizen($event.target.value)"
                      maxlength="11"
                      minlength="11"
                      name="cidNumber"
                      placeholder="CID Number"
                      (change)="validateNumber('cidNumber')"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                    />
                    <mat-error>Enter 11 digits CID Number</mat-error>
                  </mat-form-field>
                </div>
                <div *ngIf="nationality === false" class="col-md-6">
                  <label class="col-form-label">ID/ Passport/ Permit No<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="passportNumber"
                      matInput
                      name="passportNumber"
                      placeholder="Passport Number"
                    />
                    <mat-error>Enter valid Passport Number</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Owner Name <span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="ownerName" id="ownerName" matInput name="ownerName" />
                    <mat-error>Enter Valid Owner Name</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <div class="form-group row" *ngIf="nationality === false">
                <div class="col-md-6">
                  <label class="col-form-label">Country<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="countryId">
                      <mat-option value="">Select Country</mat-option>
                      <mat-option *ngFor="let country of countrys" [value]="country.id">{{
                        country.countryName
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Country is required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <h5>Present Address</h5>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label"> Dzongkhag<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select (selectionChange)="getGewogs($event.value)" formControlName="dzongkhagId">
                      <mat-option value="">Select Dzongkhag</mat-option>
                      <mat-option *ngFor="let dzongkhag of dzongkhags" [value]="dzongkhag.id">{{
                        dzongkhag.dzongkhagName
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Dzongkhag is required</mat-error>
                  </mat-form-field>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label"> Gewog<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select (selectionChange)="getVillage($event.value)" formControlName="gewogId">
                      <mat-option value="">Select Gewog</mat-option>
                      <mat-option *ngFor="let gewog of gewogs" [value]="gewog.id">{{ gewog.gewogName }}</mat-option>
                    </mat-select>
                    <mat-error>Gewog is required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label"> Village</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="villageId">
                      <mat-option></mat-option>
                      <mat-option *ngFor="let village of villages" [value]="village.id">{{
                        village.villageName
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Village is required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Locality</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="locality" matInput name="locality" type="text" placeholder="Locality" />
                    <!-- pattern="([aA0-zZ9]+[*&^%_~`-])\w+ -->
                    <mat-error>locality is required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Mobile Number <span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="mobileNumber"
                      matInput
                      name="mobileNumber"
                      placeholder="Mobile Number"
                      maxLength="8"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                    />
                    <!-- (change)="validateMobileNumber()" -->
                    <mat-error>Enter Valid Mobile Number</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Email ID</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="emailId"
                      matInput
                      name="emailId"
                      placeholder="Email ID"
                      pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                    />
                    <mat-error>Enter Valid Email Address</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />

              <h4>Patient Details</h4>
              <hr />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Animal Ownership Type <span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="petRegistrationTypeId">
                      <mat-option value="">Select Ownership Type</mat-option>
                      <mat-option *ngFor="let ownershipType of ownershipTypes" [value]="ownershipType.id">{{
                        ownershipType.ownerType
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Animal Ownership Type is required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Species<span class="text-danger">*</span>:</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select (selectionChange)="getAnimalTypes($event.value)" formControlName="speciesId">
                      <mat-option value="">Select Species</mat-option>
                      <mat-option *ngFor="let specie of species" [value]="specie.id">{{
                        specie.speciesName
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Species is required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />

              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Animal Type<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="animalTypeId" (selectionChange)="DogOrCat()">
                      <mat-option value="">Select Animal Type</mat-option>
                      <mat-option *ngFor="let animalType of animalTypes" [value]="animalType.id">{{
                        animalType.animalType
                      }}</mat-option>
                    </mat-select>
                    <mat-error>Animal Type is required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Pet Registration Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="petRegistrationNumber"
                      matInput
                      name="petRegistrationNumber"
                      placeholder="Pet Registration Number"
                    />
                    <mat-error>Enter Valid Pet Registration Number</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Ear Tag Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="earTagNumber"
                      matInput
                      name="earTagNumber"
                      type="text"
                      placeholder="Ear Tag Number"
                    />
                    <mat-error>Ear Tag Number ID is required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Microchip Number</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="microchipNumber"
                      matInput
                      name="microchipNumber"
                      placeholder="Microchip Number"
                      maxLength="15"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                    />
                    <mat-error>Enter Valid Microchip Number</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Animal Name</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input formControlName="animalName" matInput name="animalName" placeholder="Animal Name" />
                    <mat-error>Enter Valid Animal Name</mat-error>
                  </mat-form-field>
                </div>
                <br />

                <div class="col-md-6" *ngIf="neuterStatus">
                  <label class="col-form-label" for="text-input"
                    >Neuter Status <span class="text-danger">*</span></label
                  >
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="neuterStatus">
                      <mat-option value="">Select Neuter Status</mat-option>
                      <mat-option value="Yes">Yes</mat-option>
                      <mat-option value="No">No</mat-option>
                    </mat-select>
                    <mat-error>Neuter Status is required</mat-error>
                  </mat-form-field>

                  <!-- <mat-error>Neutered Status is required</mat-error> -->
                </div>
              </div>
              <br />
              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Breed<span class="text-danger">*</span></label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <mat-select formControlName="breedId">
                      <mat-option value="">Select Breed</mat-option>
                      <mat-option *ngFor="let breed of breeds" [value]="breed.id">{{ breed.breedName }}</mat-option>
                    </mat-select>
                    <mat-error>Breed is required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <label class="col-form-label">Age</label>
                  <div class="row gutters-xs">
                    <div class="col-4">
                      <mat-form-field appearance="outline" style="width: 120px">
                        <mat-label>Year</mat-label>
                        <input
                          formControlName="year"
                          matInput
                          type="number"
                          id="number"
                          placeholder="Year(1-100)"
                          min="0"
                          max="12"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-4">
                      <mat-form-field appearance="outline" style="width: 120px">
                        <mat-label>Month</mat-label>
                        <input
                          formControlName="month"
                          matInput
                          type="number"
                          id="number"
                          min="0"
                          max="31"
                          placeholder="Month(1-11)"
                          (change)="validateYear('month')"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-4">
                      <mat-form-field appearance="outline" style="width: 120px">
                        <mat-label>Day</mat-label>
                        <input
                          formControlName="day"
                          matInput
                          type="number"
                          id="number"
                          (change)="validateYear('day')"
                          placeholder="Day(1-29)"
                          min="0"
                          max="100"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <div class="col-md-6">
                  <label class="col-form-label">Sex<span class="text-danger">*</span></label>
                  <mat-radio-group class="mat-radio-group p-3" aria-label="Select an option" formControlName="sex">
                    <mat-radio-button value="M">Male </mat-radio-button>
                    <mat-radio-button value="F">Female </mat-radio-button>
                  </mat-radio-group>
                  <mat-error *ngIf="statusFlag">Sex is required</mat-error>
                </div>

                <div class="col-md-6">
                  <label class="col-form-label">Body weight (KG)</label>
                  <mat-form-field appearance="outline" class="example-full-width">
                    <input
                      formControlName="bodyweight"
                      matInput
                      name="bodyweight"
                      type="number"
                      onkeyup="if(this.value<0){this.value= this.value * -1}"
                      onkeypress="return event.charCode <= 57"
                      placeholder="Body Weight"
                    />
                    <mat-error>Body weight is required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <hr />

              <mat-card-actions>
                <button (click)="saveRegistration()" color="primary" mat-raised-button>Submit</button>
                <button (click)="saveAsDraft()" color="primary" mat-raised-button>Save as Draft</button>
                <!-- <button mat-raised-button (click)="printPage()"><mat-icon>print</mat-icon>&nbsp;Print</button> -->
              </mat-card-actions>
              <!-- <button mat-raised-button (click)="printPage()"><mat-icon>print</mat-icon>&nbsp;Print</button>  -->
            </div>
          </form>
        </div>
      </mat-card-content>
    </div>
  </div>
  <treatment-registration *ngIf="registered" [registrationDetails]="registrationDetails"></treatment-registration>
</mat-card>
